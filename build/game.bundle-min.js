!function(){"use strict";
/**
   * @preserve
   * Kontra.js v9.0.0
   */let t=()=>{};let e,i,s={};function n(t,e){s[t]=s[t]||[],s[t].push(e)}function a(t,...e){(s[t]||[]).map((t=>t(...e)))}let r={get:(e,i)=>"_proxy"==i||t};function h(){return i}class o{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0,name:n}){let{width:a,height:r,margin:h=0}=t.frame;Object.assign(this,{spriteSheet:t,frames:e,frameRate:i,loop:s,name:n,width:a,height:r,margin:h,isStopped:!1,_f:0,_a:0})}clone(){return new o(this)}start(){this.isStopped=!1,this.loop||this.reset()}stop(){this.isStopped=!0}reset(){this._f=0,this._a=0}update(t=1/60){if(!this.isStopped)if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate;else this.stop()}render({x:t,y:e,width:i=this.width,height:s=this.height,context:n=h()}){let a=this.frames[this._f]/this.spriteSheet._f|0,r=this.frames[this._f]%this.spriteSheet._f|0;n.drawImage(this.spriteSheet.image,r*this.width+(2*r+1)*this.margin,a*this.height+(2*a+1)*this.margin,this.width,this.height,t,e,i,s)}}function c(){return new o(...arguments)}function d(t,e,i){return Math.min(Math.max(t,i),e)}class l{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new l(this.x+t.x,this.y+t.y,this)}subtract(t){return new l(this.x-t.x,this.y-t.y,this)}scale(t){return new l(this.x*t,this.y*t)}normalize(t=this.length()||1){return new l(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?d(this._a,this._d,t):t}set y(t){this._y=this._c?d(this._b,this._e,t):t}}function p(){return new l(...arguments)}class u{constructor(t){return this.init(t)}init(t={}){this.position=p(),this.velocity=p(),this.acceleration=p(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class w extends u{init({width:t=0,height:e=0,context:i=h(),render:s=this.draw,update:a=this.advance,children:r=[],anchor:o={x:0,y:0},opacity:c=1,rotation:d=0,scaleX:l=1,scaleY:p=1,...u}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:o,opacity:c,rotation:d,scaleX:l,scaleY:p,...u}),this._di=!0,this._uw(),this.addChild(r),this._rf=s,this._uf=a,n("init",(()=>{this.context??=h()}))}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(e||i)&&t.translate(e,i),this.context.globalAlpha=this.opacity,this._rf(),(e||i)&&t.translate(-e,-i),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:s=0,_wsx:n=1,_wsy:a=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wsx=n*this.scaleX,this._wsy=a*this.scaleY,this._wx=this._wx*n,this._wy=this._wy*a,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=s+this.rotation;let{x:r,y:h}=function(t,e){let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}({x:this._wx,y:this._wy},s);this._wx=r,this._wy=h,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...e){e.flat().map((e=>{this.children.push(e),e.parent=this,e._pc=e._pc||t,e._pc()}))}removeChild(...t){t.flat().map((t=>{(function(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0})(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=d(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class f extends w{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function m(){return new f(...arguments)}function g(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}let y=[],_={},x={},v={0:"south",1:"east",2:"west",3:"north",4:"leftshoulder",5:"rightshoulder",6:"lefttrigger",7:"righttrigger",8:"select",9:"start",10:"leftstick",11:"rightstick",12:"dpadup",13:"dpaddown",14:"dpadleft",15:"dpadright"};function b(t){y[t.gamepad.index]={pressedButtons:{},axes:{}}}function S(t){delete y[t.gamepad.index]}function A(){y.map((t=>{t.pressedButtons={},t.axes={}}))}function R(){let t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;i.buttons.map(((t,e)=>{let s=v[e],{pressed:n}=t,{pressedButtons:a}=y[i.index],r=a[s];!r&&n?[_[i.index],_].map((e=>{e?.[s]?.(i,t,s)})):r&&!n&&[x[i.index],x].map((e=>{e?.[s]?.(i,t,s)})),a[s]=n}));let{axes:s}=y[i.index];s.leftstickx=i.axes[0],s.leftsticky=i.axes[1],s.rightstickx=i.axes[2],s.rightsticky=i.axes[3]}}function L(t,{gamepad:e}={}){return isNaN(e)?y.some((e=>e.pressedButtons[t])):!!y[e]&&!!y[e].pressedButtons[t]}function M(t,e){return y[e]?.axes[t]||0}let k={},E={},C={},I={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function Y(e=t,i){e._pd&&i.preventDefault(),e(i)}function O(t){let e=I[t.code],i=k[e];C[e]=!0,Y(i,t)}function P(t){let e=I[t.code],i=E[e];C[e]=!1,Y(i,t)}function U(){C={}}function B(t){return!![].concat(t).some((t=>C[t]))}function X(t){if(+t==t)return t;let e=[],i=t.split(".."),s=+i[0],n=+i[1],a=s;if(s<n)for(;a<=n;a++)e.push(a);else for(;a>=n;a--)e.push(a);return e}class W{constructor({image:t,frameWidth:e,frameHeight:i,frameMargin:s,animations:n}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,margin:s},this._f=t.width/e|0,this.createAnimations(n)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:n,loop:a}=t[i];if(e=[],null==s)throw Error("Animation "+i+" must provide a frames property");[].concat(s).map((t=>{e=e.concat(X(t))})),this.animations[i]=c({spriteSheet:this,frames:e,frameRate:n,loop:a,name:i})}}}let{canvas:j,context:G}=function(t,{contextless:s=!1}={}){if(e=document.getElementById(t)||t||document.querySelector("canvas"),s&&(e=e||new Proxy({},r)),!e)throw Error("You must provide a canvas element for the game");return i=e.getContext("2d")||new Proxy({},r),i.imageSmoothingEnabled=!1,a("init"),{canvas:e,context:i}}();var T=new CPlayer;T.init(song);var N=new CPlayer;N.init(menu_song);var q=new CPlayer;q.init(death_song);var D=new CPlayer;D.init(collect_song);var F,H,z,K,V,J,Q,Z,$,tt=new CPlayer;tt.init(level_song);var et,it,st,nt=!1;setInterval((function(){if(!nt&&(nt=T.generate()>=1)){var t=T.createWave();V=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var at=!1;q.init(death_song),setInterval((function(){at||(at=q.generate()>=1)&&(H=q.createWave(),J=URL.createObjectURL(new Blob([H],{type:"audio/wav"})))}));var rt=!1;N.init(menu_song),setInterval((function(){rt||(rt=N.generate()>=1)&&(F=N.createWave(),Q=URL.createObjectURL(new Blob([F],{type:"audio/wav"})),(et=document.createElement("audio")).src=Q,et.loop=!0,et.play())}));var ht=!1;D.init(collect_song),setInterval((function(){ht||(ht=D.generate()>=1)&&(z=D.createWave(),Z=URL.createObjectURL(new Blob([z],{type:"audio/wav"})),(it=document.createElement("audio")).src=Z,it.loop=!1)}));var ot=!1;tt.init(level_song),setInterval((function(){ot||(ot=tt.generate()>=1)&&(K=tt.createWave(),$=URL.createObjectURL(new Blob([K],{type:"audio/wav"})),(st=document.createElement("audio")).src=$,st.loop=!1)}));var ct=1,dt=0,lt=15,pt=!1,ut=1;!function(){let t;for(t=0;t<26;t++)I["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)I["Digit"+t]=I["Numpad"+t]=""+t;window.addEventListener("keydown",O),window.addEventListener("keyup",P),window.addEventListener("blur",U)}(),window.addEventListener("gamepadconnected",b),window.addEventListener("gamepaddisconnected",S),window.addEventListener("blur",A),n("tick",R);let wt=new Image;wt.src="player_sheet.png",wt.onload=function(){let e=function(){return new W(...arguments)}({image:wt,frameWidth:8,frameHeight:8,animations:{idle:{frames:[0,1,2,3],frameRate:5,loop:!0},walk:{frames:[4,5,6,7],frameRate:5,loop:!0},die:{frames:10,frameRate:5,loop:!1}}}),i=m({speed:3,isMoving:!1,isPrimed:!1,scaleX:4,scaleY:4,badShit:0,win:!1,x:360,y:240,anchor:{x:.5,y:.5},animations:e.animations,ttl:0,update(){let t=M("leftstickx",0),e=M("leftsticky",0);this.isMoving=!1,t<-.4||B(["arrowleft","a"])?(this.x-=1*this.speed,this.isMoving=!0):(t>.4||B(["arrowright","d"]))&&(this.x+=1*this.speed,this.isMoving=!0),e<-.4||B(["arrowup","w"])?(this.y-=1*this.speed,this.isMoving=!0):(e>.4||B(["arrowdown","s"]))&&(this.y+=1*this.speed,this.isMoving=!0);for(var i=0;i<o.length;i++){var n=this.x,a=this.y;let t=o[i];n>=t.x&&n<=t.x+t.width&&a>=t.y&&a<=t.y+t.height&&(it.play(),dt+=parseInt(t.content),lt+=parseInt(t.content),dt>=100&&(dt=0,ct+=1,l.content="Level: "+ct,st.play(),ut+=.5,ct>=14&&(f(),y())),p.content="Score: "+dt,c.includes(dt)?(this.isPrimed=!0,r(),s()):(this.isPrimed=!1,r()),t.ttl=0)}this.isMoving?"walk"!=this.currentAnimation.name&&this.playAnimation("walk"):"idle"!=this.currentAnimation.name&&this.playAnimation("idle"),this.advance()}});function s(){o=o.filter((t=>!t.isAlive())),i.badShit=Math.floor(3*Math.random()+1),1==i.badShit&&(i.speed=-i.speed),2==i.badShit&&(i.speed=.5),3==i.badShit&&(i.speed=10)}function r(){1==i.badShit&&(i.speed=-i.speed),2==i.badShit&&(i.speed=3),3==i.badShit&&(i.speed=3),i.badShit=0}let o=[],c=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97];function d(){let t=m({content:Math.floor(8*Math.random()+1).toString(),speed:ut,x:Math.floor(720*Math.random()),y:0,color:"#eeeeee",width:20,height:20,update(){this.y+=1*this.speed},render(){draw(G,this.content,4,this.color)}});for(var e=!0,i=0;i<o.length;i++)t.x>o[i].x&&t.x<o[i].x+o[i].width+10&&(e=!1);e&&o.push(t)}let l=m({content:"Level: "+ct,x:5,y:5,color:"#eeeeee",width:20,height:20,update(){},render(){draw(G,this.content,4,this.color)}}),p=m({content:"Score: "+dt,x:5,y:30,color:"#eeeeee",width:20,height:20,update(){i.isPrimed?this.color="#ff0000":this.color="#eeeeee"},render(){draw(G,this.content,4,this.color)}}),u=m({content:"Time Left: "+lt,x:5,y:55,color:"#eeeeee",width:20,height:20,update(){this.content="Time Left: "+lt,lt<=10?(this.color="#ff0000",et.playbackRate=lt<=5?1.22:1.11):(this.color="#eeeeee",et.playbackRate=1)},render(){draw(G,this.content,4,this.color)}});setInterval((function(){lt-=1}),1e3);let w=function({fps:e=60,clearCanvas:i=!0,update:s=t,render:r,context:o=h(),blur:c=!1}={}){if(!r)throw Error("You must provide a render() function");let d,l,p,u,w,f=0,m=1e3/e,y=1/e,_=i?g:t,x=!0;function v(){if(l=requestAnimationFrame(v),x&&(p=performance.now(),u=p-d,d=p,!(u>1e3))){for(a("tick"),f+=u;f>=m;)w.update(y),f-=m;_(w.context),w.render()}}return c||(window.addEventListener("focus",(()=>{x=!0})),window.addEventListener("blur",(()=>{x=!1}))),n("init",(()=>{w.context??=h()})),w={update:s,render:r,isStopped:!0,context:o,start(){d=performance.now(),this.isStopped=!1,requestAnimationFrame(v)},stop(){this.isStopped=!0,cancelAnimationFrame(l)},_frame:v,set _last(t){d=t}},w}({update:function(){if(i.isAlive()){if(l.update(),p.update(),u.update(),i.update(),i.x>j.width&&(i.x=0),i.x<0&&(i.x=j.width),o.map((t=>{t.update(),t.y+t.height>480&&(t.ttl=0)})),o=o.filter((t=>t.isAlive())),o.length<1)for(var t=0;t<6;t++)d();lt<1&&(i.ttl=0,i.win=!1,i.playAnimation("die"),o.filter((t=>{t.ttl=0})),et.pause(),et.currentTime=0,et.playbackRate=1,et.src=J,et.loop=!1,et.play()),p.update()}else pt&&(L("south")||B(["r","enter","space"]))&&function(){ct=1,l.content="Level: "+ct,dt=0,p.content="Score: "+dt,lt=15,u.content="Time Left: "+lt;for(var t=0;t<6;t++)d();i.x=360,i.y=240,i.ttl=1/0,i.win=!1,et.playbackRate=1,et.src=V,et.loop=w,et.play()}(),pt||!L("south")&&!B(["r","enter","space"])||function(){ct=1,l.content="Level: "+ct,dt=0,p.content="Score: "+dt,lt=15,u.content="Time Left: "+lt;for(var t=0;t<7;t++)d();i.x=360,i.y=240,i.ttl=1/0,i.win=!1,pt=!0,et.playbackRate=1,et.src=V,et.loop=!0,et.play()}();(L("select")||B(["m"]))&&(et.muted=!et.muted)},render:function(){pt?(i.render(),o.map((t=>{t.render()})),l.render(),p.render(),u.render(),i.isAlive()||(i.win?y():draw(G,"GAME OVER",12,"red",125,200))):_()}});function f(){i.ttl=0,i.win=!0,i.playAnimation("idle"),o.filter((t=>{t.ttl=0})),et.pause(),et.currentTime=0}function y(){draw(G,"YOU WIN!",12,"red",150,200)}function _(){draw(G,"PRIMONUMEROPHOBIA",9,"red",33,200)}_(),w.start()}}();
