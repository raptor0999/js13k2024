!function(){"use strict";
/**
   * @preserve
   * Kontra.js v9.0.0
   */let t=()=>{};let e,i,h={};function r(t,e){h[t]=h[t]||[],h[t].push(e)}function n(t,...e){(h[t]||[]).map((t=>t(...e)))}let o={get:(e,i)=>"_proxy"==i||t};function a(){return i}class d{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0,name:h}){let{width:r,height:n,margin:o=0}=t.frame;Object.assign(this,{spriteSheet:t,frames:e,frameRate:i,loop:s,name:h,width:r,height:n,margin:o,isStopped:!1,_f:0,_a:0})}clone(){return new d(this)}start(){this.isStopped=!1,this.loop||this.reset()}stop(){this.isStopped=!0}reset(){this._f=0,this._a=0}update(t=1/60){if(!this.isStopped)if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate;else this.stop()}render({x:t,y:e,width:i=this.width,height:s=this.height,context:h=a()}){let r=this.frames[this._f]/this.spriteSheet._f|0,n=this.frames[this._f]%this.spriteSheet._f|0;h.drawImage(this.spriteSheet.image,n*this.width+(2*n+1)*this.margin,r*this.height+(2*r+1)*this.margin,this.width,this.height,t,e,i,s)}}function l(){return new d(...arguments)}function c(t,e,i){return Math.min(Math.max(t,i),e)}class p{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new p(this.x+t.x,this.y+t.y,this)}subtract(t){return new p(this.x-t.x,this.y-t.y,this)}scale(t){return new p(this.x*t,this.y*t)}normalize(t=this.length()||1){return new p(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?c(this._a,this._d,t):t}set y(t){this._y=this._c?c(this._b,this._e,t):t}}function u(){return new p(...arguments)}class m{constructor(t){return this.init(t)}init(t={}){this.position=u(),this.velocity=u(),this.acceleration=u(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class g extends m{init({width:t=0,height:e=0,context:i=a(),render:s=this.draw,update:h=this.advance,children:n=[],anchor:o={x:0,y:0},opacity:d=1,rotation:l=0,scaleX:c=1,scaleY:p=1,...u}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:o,opacity:d,rotation:l,scaleX:c,scaleY:p,...u}),this._di=!0,this._uw(),this.addChild(n),this._rf=s,this._uf=h,r("init",(()=>{this.context??=a()}))}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(e||i)&&t.translate(e,i),this.context.globalAlpha=this.opacity,this._rf(),(e||i)&&t.translate(-e,-i),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:s=0,_wsx:h=1,_wsy:r=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wsx=h*this.scaleX,this._wsy=r*this.scaleY,this._wx=this._wx*h,this._wy=this._wy*r,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=s+this.rotation;let{x:n,y:o}=function(t,e){let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}({x:this._wx,y:this._wy},s);this._wx=n,this._wy=o,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...e){e.flat().map((e=>{this.children.push(e),e.parent=this,e._pc=e._pc||t,e._pc()}))}removeChild(...t){t.flat().map((t=>{(function(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0})(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=c(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class f extends g{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function y(){return new f(...arguments)}function w(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}let x=[],_={},M={},v={0:"south",1:"east",2:"west",3:"north",4:"leftshoulder",5:"rightshoulder",6:"lefttrigger",7:"righttrigger",8:"select",9:"start",10:"leftstick",11:"rightstick",12:"dpadup",13:"dpaddown",14:"dpadleft",15:"dpadright"};function b(t){x[t.gamepad.index]={pressedButtons:{},axes:{}}}function T(t){delete x[t.gamepad.index]}function S(){x.map((t=>{t.pressedButtons={},t.axes={}}))}function R(){let t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;i.buttons.map(((t,e)=>{let s=v[e],{pressed:h}=t,{pressedButtons:r}=x[i.index],n=r[s];!n&&h?[_[i.index],_].map((e=>{e?.[s]?.(i,t,s)})):n&&!h&&[M[i.index],M].map((e=>{e?.[s]?.(i,t,s)})),r[s]=h}));let{axes:s}=x[i.index];s.leftstickx=i.axes[0],s.leftsticky=i.axes[1],s.rightstickx=i.axes[2],s.rightsticky=i.axes[3]}}function A(t,e,{gamepad:i,handler:s="gamepaddown"}={}){let h="gamepaddown"==s?_:M;[].concat(t).map((t=>{isNaN(i)?h[t]=e:(h[i]=h[i]||{},h[i][t]=e)}))}function k(t,{gamepad:e}={}){return isNaN(e)?x.some((e=>e.pressedButtons[t])):!!x[e]&&!!x[e].pressedButtons[t]}function E(t,e){return x[e]?.axes[t]||0}let L={},C={},Y={},P={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function X(e=t,i){e._pd&&i.preventDefault(),e(i)}function B(t){let e=P[t.code],i=L[e];Y[e]=!0,X(i,t)}function F(t){let e=P[t.code],i=C[e];Y[e]=!1,X(i,t)}function I(){Y={}}function O(t,e,{handler:i="keydown",preventDefault:s=!0}={}){let h="keydown"==i?L:C;e._pd=s,[].concat(t).map((t=>h[t]=e))}function N(t){return!![].concat(t).some((t=>Y[t]))}function D(t){if(+t==t)return t;let e=[],i=t.split(".."),s=+i[0],h=+i[1],r=s;if(s<h)for(;r<=h;r++)e.push(r);else for(;r>=h;r--)e.push(r);return e}class G{constructor({image:t,frameWidth:e,frameHeight:i,frameMargin:s,animations:h}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,margin:s},this._f=t.width/e|0,this.createAnimations(h)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:h,loop:r}=t[i];if(e=[],null==s)throw Error("Animation "+i+" must provide a frames property");[].concat(s).map((t=>{e=e.concat(D(t))})),this.animations[i]=l({spriteSheet:this,frames:e,frameRate:h,loop:r,name:i})}}}let{canvas:U,context:z}=function(t,{contextless:s=!1}={}){if(e=document.getElementById(t)||t||document.querySelector("canvas"),s&&(e=e||new Proxy({},o)),!e)throw Error("You must provide a canvas element for the game");return i=e.getContext("2d")||new Proxy({},o),i.imageSmoothingEnabled=!1,n("init"),{canvas:e,context:i}}();var V={menu:"",game1:"",game2:"",game3:"",game4:"",boss:"",death:"",tally:"",pu1:"",pu2:"",pu3:"",lp1:"",lp2:"",lp3:"",lz1:"",dr1:"",dr2:"",dr3:"",b1:"",lu1:""},W=document.createElement("audio");W.loop=!0;var j=document.createElement("audio"),H=document.createElement("audio"),q=document.createElement("audio"),K=document.createElement("audio");let J=[];var Q=0,Z=1,$=15,tt=100,et=0,it=0,st=15,ht=0,rt=!1,nt=!1,ot=!0,at=!1,dt=!1,lt=!1,ct=!1,pt=!1,ut=3,mt=0,gt=1;let ft=[];ft.push({effect:"magnet_range",content:"U",color:"cyan"}),ft.push({effect:"magnet_speed_mult",content:"U",color:"green"}),ft.push({effect:"thrust_time",content:"T",color:"orange"}),ft.push({effect:"thrust_refresh_time",content:"T",color:"brown"}),ft.push({effect:"thrust_mult",content:"T",color:"green"}),ft.push({effect:"player_speed",content:"S",color:"green"}),ft.push({effect:"bomb_dmg",content:"B",color:"yellow"}),ft.push({effect:"bomb_time",content:"B",color:"orange"});let yt=[],wt=[],xt=[],_t=[],Mt=[],vt=[],bt=[],Tt=[];!function(){let t;for(t=0;t<26;t++)P["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)P["Digit"+t]=P["Numpad"+t]=""+t;window.addEventListener("keydown",B),window.addEventListener("keyup",F),window.addEventListener("blur",I)}(),window.addEventListener("gamepadconnected",b),window.addEventListener("gamepaddisconnected",T),window.addEventListener("blur",S),r("tick",R);let St=new Image;St.src="player_sheet.png",St.onload=function(){let e=function(){return new G(...arguments)}({image:St,frameWidth:32,frameHeight:32,animations:{idle:{frames:[0,1,2,3],frameRate:5,loop:!0},walk:{frames:[4,5,6,7],frameRate:5,loop:!0},die:{frames:10,frameRate:5,loop:!1}}}),i=y({speed:ut,isMoving:!1,isPrimed:!1,badShit:0,win:!1,magnetRange:32,magnetSpeedMult:1,thrustMult:1,thrustRefreshTime:.5,currentThrustRefreshTime:0,thrustTime:.3,currentThurstTime:0,isThrusting:!1,isThrustRefreshing:!1,bombDmg:5,bombTime:5,currentBombTime:0,stunTime:.5,currentStunTime:0,isStunned:!1,x:360,y:240,anchor:{x:.5,y:.5},animations:e.animations,ttl:0,update(){let t=E("leftstickx",0),e=E("leftsticky",0);this.isMoving=!1,this.currentBombTime>0&&(this.currentBombTime-=1/60),this.isStunned&&(this.currentStunTime+=1/60,this.currentStunTime>=this.stunTime&&(this.isStunned=!1,this.currentStunTime=0)),this.isStunned||(t<-.4||N(["arrowleft","a"])?(this.x-=1*this.speed,this.isMoving=!0):(t>.4||N(["arrowright","d"]))&&(this.x+=1*this.speed,this.isMoving=!0),e<-.4||N(["arrowup","w"])?(this.y-=1*this.speed,this.isMoving=!0):(e>.4||N(["arrowdown","s"]))&&(this.y+=1*this.speed,this.isMoving=!0)),this.isThrusting&&(this.currentThurstTime>this.thrustTime?(this.isThrusting=!1,this.isThrustRefreshing=!0,this.speed=ut,this.currentThurstTime=0):this.currentThurstTime+=1/60),this.isThrustRefreshing&&(this.currentThrustRefreshTime>this.thrustRefreshTime?(this.isThrustRefreshing=!1,this.currentThrustRefreshTime=0):this.currentThrustRefreshTime+=1/60);for(var i=0;i<yt.length;i++){let t=yt[i];if(h(this,t)){if("letter"==t.type){if(et+=parseInt(t.content),st+=parseInt(t.content),et>=tt)Z+=1,_.content="Level: "+Z,W.pause(),Z>=14?(I(),D()):(draw(z,"Next Level!",9,"#FFFFFF",125,200),Y.stop(),K.src=V.lu1,K.play(),gt+=.25);else 0==(n=Math.floor(3*Math.random()))&&o(j,V.lp1),1==n&&o(j,V.lp2),2==n&&o(j,V.lp3);M.content="Score: "+et,wt.includes(et)?(c(),this.isPrimed=!0,this.isThrusting=!1,l()):(c(),this.isPrimed=!1),_t.includes(et)&&(u(ft[Math.floor(Math.random()*ft.length)]),_t=_t.filter((t=>t!=et))),L()}if("powerup"==t.type)0==(n=Math.floor(3*Math.random()))&&o(j,V.lp1),1==n&&o(j,V.lp2),2==n&&o(j,V.lp3),0==n&&o(H,V.pu1),1==n&&o(H,V.pu2),2==n&&o(H,V.pu3),Rt(t.effect);t.ttl=0}t.x>=this.x-this.magnetRange&&t.x<=this.x+this.magnetRange&&t.y>=this.y-this.magnetRange&&t.y<=this.y+this.magnetRange&&(t.x>this.x&&(t.x-=1*this.magnetSpeedMult),t.x<this.x&&(t.x+=1*this.magnetSpeedMult),t.y>this.y&&(t.y-=1*this.magnetSpeedMult),t.y<this.y&&(t.y+=1*this.magnetSpeedMult))}for(i=0;i<vt.length;i++){let t=vt[i];for(var r=0;r<bt.length;r++){let e=bt[r];h(t,e)&&("p_bomb"!=e.type||"2"!=t.type&&"3"!=t.type&&"5"!=t.type&&"7"!=t.type||(o(H,s.b1),t.ttl=0,e.ttl=0),"p_bomb"!=e.type||"mid_boss"!=t.type&&"final_boss"!=t.type||e.active&&(o(H,V.b1),t.hp-=e.dmg,t.children[0].content=t.hp.toString(),t.hp<1&&t.ttl>0&&(t.ttl=0,"mid_boss"==t.type&&(et+=500,M.content="Score: "+et),"final_boss"==t.type&&(et+=1e3,M.content="Score: "+et,I(),D())),e.ttl=0,e.active=!1))}var n;if(("2"==t.type||"3"==t.type||"5"==t.type||"7"==t.type||"enemy_shot"==t.type)&&h(this,t))(et-=t.scoreDamage)<0&&(et=0),M.content="Score: "+et,t.ttl=0,this.isStunned=!0,0==(n=Math.floor(3*Math.random()))&&o(j,V.lp1),1==n&&o(j,V.lp2),2==n&&o(j,V.lp3),wt.includes(et)?(c(),this.isPrimed=!0,this.isThrusting=!1,l()):(c(),this.isPrimed=!1),_t.includes(et)&&(u(ft[Math.floor(Math.random()*ft.length)]),_t=_t.filter((t=>t!=et))),L();"mid_boss_shot"==t.type&&h(this,t)&&F(),"final_boss_shot"==t.type&&h(this,t)&&F()}this.isMoving?"walk"!=this.currentAnimation.name&&this.playAnimation("walk"):"idle"!=this.currentAnimation.name&&this.playAnimation("idle"),this.advance()}});function h(t,e){return t.x>=e.x-e.width/2&&t.x<=e.x+e.width/2&&t.y>=e.y-e.height/2&&t.y<=e.y+e.height/2}function o(t,e){t.src=e,t.play()}function d(t){W.pause(),W.currentTime=0,W.src=t,W.play()}function l(){o(H,V.dr1),i.badShit=Math.floor(3*Math.random()+1),1==i.badShit&&(i.speed=-i.speed),2==i.badShit&&(i.speed=.5),3==i.badShit&&(i.speed=10)}function c(){i.isPrimed&&o(H,V.dr3),1==i.badShit&&(i.speed=-i.speed),2==i.badShit&&(i.speed=ut),3==i.badShit&&(i.speed=ut),i.badShit=0}function p(t=0,e=1,i=Math.floor(Math.random()*U.width),s=0){let h=y({type:"letter",dirX:t,dirY:e,content:Math.floor(9*Math.random()+1).toString(),speed:gt,x:i,y:s,anchor:{x:.5,y:.5},color:"#eeeeee",width:20,height:20,update(){this.x+=t*this.speed,this.y+=e*this.speed,(this.y<0||this.y>U.height||this.x<0||this.x>U.width)&&(this.ttl=0)},render(){draw(z,this.content,4,this.color)}});yt.push(h)}function u(t){let e=y({type:"powerup",effect:t.effect,content:t.content,speed:1,x:Math.floor(Math.random()*U.width),y:0,anchor:{x:.5,y:.5},color:t.color,color1:t.color,color2:"white",blinkTimer:0,blinkSpeed:30,width:20,height:20,update(){this.y+=1*this.speed,this.blinkTimer+=1,this.blinkTimer>this.blinkSpeed&&(this.color==this.color1?this.color=this.color2:this.color=this.color1,this.blinkTimer=0)},render(){draw(z,this.content,4,this.color)}});yt.push(e)}function m(t,e,s){let h=y({type:t,content:t,speed:e,scoreDamage:s,shotTimer:60,currentShotTime:0,isMoving:!1,x:Math.floor(Math.random()*U.width),y:Math.floor(Math.random()*U.height),anchor:{x:.5,y:.5},color:"yellow",width:30,height:30,update(){var e=Math.floor(2*Math.random()),s=Math.floor(2*Math.random());"3"!=t&&"7"!=t||(this.currentShotTime+=1,this.currentShotTime>this.shotTimer&&(!function(t,e){o(q,V.lz1);let i=y({type:"enemy_shot",moveX:Math.floor(2*Math.random()),moveY:Math.floor(2*Math.random()),ttl:180,content:"5",speed:3,scoreDamage:1,isMoving:!1,x:t,y:e,anchor:{x:.5,y:.5},color:"pink",width:10,height:10,update(t){this.rotation+=.1,0==this.moveX?(this.x-=1*this.speed,this.isMoving=!0):1==this.moveX&&(this.x+=1*this.speed,this.isMoving=!0),0==this.moveY?(this.y-=1*this.speed,this.isMoving=!0):1==this.moveY&&(this.y+=1*this.speed,this.isMoving=!0)},render(){draw(z,this.content,2,this.color)}});vt.push(i)}(this.x,this.y),this.currentShotTime=0)),0==e?(this.x-=1*this.speed,this.isMoving=!0):1==e&&(this.x+=1*this.speed,this.isMoving=!0),0==s?(this.y-=1*this.speed,this.isMoving=!0):1==s&&(this.y+=1*this.speed,this.isMoving=!0),this.x<i.x&&(this.x+=1*this.speed),this.x>i.x&&(this.x-=1*this.speed),this.y<i.y&&(this.y+=1*this.speed),this.y>i.y&&(this.y-=1*this.speed),this.x<0&&(this.x=0),this.x>U.width&&(this.x=U.width),this.y<0&&(this.y=0),this.y>U.height&&(this.y=U.height)},render(){draw(z,this.content,4,this.color)}});vt.push(h)}function g(){let t=y({type:"mid_boss",hp:60,shotTimer:120,currentShotTime:0,content:"PR1M3",speed:1,isMoving:!1,x:Math.floor(Math.random()*U.width),y:Math.floor(Math.random()*U.height),anchor:{x:.5,y:.5},color:"yellow",width:120,height:50,update(){this.currentShotTime+=1,this.currentShotTime>this.shotTimer&&(o(q,V.lz1),x(this.x,this.y,-1,-1),x(this.x,this.y,-1,1),x(this.x,this.y,1,-1),x(this.x,this.y,1,1),this.currentShotTime=0);var t=Math.floor(2*Math.random()),e=Math.floor(2*Math.random());0==t?(this.x-=3*this.speed,this.isMoving=!0):1==t&&(this.x+=3*this.speed,this.isMoving=!0),0==e?(this.y-=3*this.speed,this.isMoving=!0):1==e&&(this.y+=3*this.speed,this.isMoving=!0),this.x<0&&(this.x=0),this.x>U.width&&(this.x=U.width),this.y<0&&(this.y=0),this.y>U.height&&(this.y=U.height)},render(){draw(z,this.content,6,this.color)}}),e=y({content:t.hp.toString(),x:-10,y:25,color:"red",width:30,height:30,update(){},render(){draw(z,this.content,4,this.color)}});t.addChild(e),vt.push(t)}function f(){let t=y({type:"final_boss",hp:120,shotTimer:60,currentShotTime:0,content:"8055",speed:1.5,isMoving:!1,x:Math.floor(Math.random()*U.width),y:Math.floor(Math.random()*U.height),anchor:{x:.5,y:.5},color:"red",width:100,height:50,update(){this.currentShotTime+=1,this.currentShotTime>this.shotTimer&&(o(q,V.lz1),function(t,e){let i=y({type:"final_boss_shot",moveX:Math.floor(2*Math.random()),moveY:Math.floor(2*Math.random()),ttl:180,content:"13",speed:3,isMoving:!1,x:t,y:e,anchor:{x:.5,y:.5},color:"pink",width:40,height:20,update(t){this.rotation+=.2,0==this.moveX?(this.x-=1*this.speed,this.isMoving=!0):1==this.moveX&&(this.x+=1*this.speed,this.isMoving=!0),0==this.moveY?(this.y-=1*this.speed,this.isMoving=!0):1==this.moveY&&(this.y+=1*this.speed,this.isMoving=!0)},render(){draw(z,this.content,4,this.color)}});vt.push(i)}(this.x,this.y),this.currentShotTime=0);var t=Math.floor(2*Math.random()),e=Math.floor(2*Math.random());0==t?(this.x-=3*this.speed,this.isMoving=!0):1==t&&(this.x+=3*this.speed,this.isMoving=!0),0==e?(this.y-=3*this.speed,this.isMoving=!0):1==e&&(this.y+=3*this.speed,this.isMoving=!0),this.x<i.x&&(this.x+=1*this.speed),this.x>i.x&&(this.x-=1*this.speed),this.y<i.y&&(this.y+=1*this.speed),this.y>i.y&&(this.y-=1*this.speed),this.x<0&&(this.x=0),this.x>U.width&&(this.x=U.width),this.y<0&&(this.y=0),this.y>U.height&&(this.y=U.height)},render(){draw(z,this.content,8,this.color)}}),e=y({content:t.hp.toString(),x:-10,y:25,color:"red",width:30,height:30,update(){},render(){draw(z,this.content,4,this.color)}});t.addChild(e),vt.push(t)}function x(t,e,i,s){let h=y({type:"mid_boss_shot",moveX:i,moveY:s,ttl:180,content:"7",speed:3,isMoving:!1,x:t,y:e,anchor:{x:.5,y:.5},color:"orange",width:10,height:10,update(t){this.rotation+=.1,this.x+=i,this.y+=s},render(){draw(z,this.content,4,this.color)}});vt.push(h)}let _=y({content:"Level: "+Z,x:5,y:5,color:"#eeeeee",width:20,height:20,update(){},render(){draw(z,this.content,4,this.color)}});Tt.push(_);let M=y({content:"Score: "+et,x:5,y:30,color:"#eeeeee",width:20,height:20,update(){i.isPrimed?this.color="#ff0000":this.color="#eeeeee"},render(){draw(z,this.content,4,this.color)}});Tt.push(M);let v=y({content:et.toString(),x:-3,y:-35,color:"#eeeeee",width:15,height:15,update(){this.content=et.toString(),this.x=et>9?-10:-3,i.isPrimed?this.color="#ff0000":this.color="#eeeeee"},render(){draw(z,this.content,3,this.color)}});i.addChild(v);let b=y({content:et.toString(),x:-23,y:20,color:"green",width:15,height:15,update(){},render(){draw(z,this.content,3,this.color)}});i.addChild(b);let T=y({content:et.toString(),x:13,y:20,color:"red",width:15,height:15,update(){},render(){draw(z,this.content,3,this.color)}});i.addChild(T);let S=y({content:"Total: "+it,x:5,y:55,color:"#eeeeee",width:20,height:20,update(){},render(){draw(z,this.content,4,this.color)}});Tt.push(S);let R=y({content:"Time Left: "+st,x:5,y:80,color:"#eeeeee",width:20,height:20,update(){this.content="Time Left: "+st,st<=10?(this.color="#ff0000",W.playbackRate=st<=5?1.22:1.11):(this.color="#eeeeee",W.playbackRate=1)},render(){draw(z,this.content,4,this.color)}});function L(){xt=wt.filter((t=>t>et)),Mt=_t.filter((t=>t>et));var t=(xt[0]-et).toString();"NaN"==t&&(t=" "),T.content=t,"NaN"==(t=(Mt[0]-et).toString())&&(t=" "),b.content=t}Tt.push(R);let C=y({title:"PRIMONUMEROPHOBIA",page1:"In the beginning: there were only evens",page2:"Odds came about: and were sus",page3:"It made the primes: EVIL EVIL EVIL",page4:"Get thee hence! You prime",tut1:"WASD or Arrows or Left Stick to move",tut2:"Shift or West Gamepad button to thrust",tut3:"E or East Gamepad button to plant bomb",tut4:"M or Select to toggle music",tut5:"P or Start to pause",opacity:1,x:340,y:300,color:"#ffffff",update(){(k("start")||k("south")||N(["r","enter","space"]))&&(at&&(at=!1,dt=!0,console.log("tut")),ot&&(ot=!1,at=!0,console.log("intro")))},render(){ot&&draw(z,this.title,9,"red"),!ot&&at&&(draw(z,this.page1,4,this.color),draw(z,this.page2,4,this.color,0,64),draw(z,this.page3,4,this.color,0,128),draw(z,this.page4,4,this.color,0,192)),ot||at||!dt||(draw(z,this.tut1,4,this.color),draw(z,this.tut2,4,this.color,0,64),draw(z,this.tut3,4,this.color,0,128),draw(z,this.tut4,4,this.color,0,192),draw(z,this.tut5,4,this.color,0,256))}}),Y=function({fps:e=60,clearCanvas:i=!0,update:s=t,render:h,context:o=a(),blur:d=!1}={}){if(!h)throw Error("You must provide a render() function");let l,c,p,u,m,g=0,f=1e3/e,y=1/e,x=i?w:t,_=!0;function M(){if(c=requestAnimationFrame(M),_&&(p=performance.now(),u=p-l,l=p,!(u>1e3))){for(n("tick"),g+=u;g>=f;)m.update(y),g-=f;x(m.context),m.render()}}return d||(window.addEventListener("focus",(()=>{_=!0})),window.addEventListener("blur",(()=>{_=!1}))),r("init",(()=>{m.context??=a()})),m={update:s,render:h,isStopped:!0,context:o,start(){l=performance.now(),this.isStopped=!1,requestAnimationFrame(M)},stop(){this.isStopped=!0,cancelAnimationFrame(c)},_frame:M,set _last(t){l=t}},m}({update:function(){if(i.isAlive()&&nt){if(lt)K.paused&&(K.src=V.tally,K.loop=!0,K.play()),et>0&&(et-=1,M.content="Score: "+et,it+=1,S.content="Total: "+it),et<1&&st>0&&(st-=1,R.content="Time: "+st,it+=1,S.content="Total: "+it),et<1&&st<1&&K.currentTime>2.6&&(vt=vt.filter((t=>{t.isAlive()})),bt=bt.filter((t=>{t.isAlive()})),yt=yt.filter((t=>{t.isAlive()})),wt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],_t=[11,22,33,44,55,66,77,88,99],lt=!1,et=0,st=15,L(),K.pause(),K.src=V.lu1,K.loop=!1,K.currentTime=0,W.playbackRate=1,d(V.game4),nt=!1);else{if(mt+=1/60,(ht+=1/60)>1){if(st-=1,Z>1&&wt.includes(st)){var t=[2,3,5,7],e=Math.floor(4*Math.random());for(m(t[e].toString(),Math.floor(1*Math.random())+1,t[e]);vt.length>10;)vt.splice(1,1)}ht=0}if(mt>1){if(Z<3)p();else if(Z>=3&&Z<7){0==(s=Math.floor(2*Math.random()))?p(0,1):p(0,-1,Math.floor(Math.random()*U.width),U.height)}else if(Z>=7&&Z<10){0==(s=Math.floor(4*Math.random()))&&p(0,1),1==s&&p(0,-1,Math.floor(Math.random()*U.width),U.height),2==s&&p(1,0,0,Math.floor(Math.random()*U.height)),3==s&&p(-1,0,U.width,Math.floor(Math.random()*U.height))}else if(Z>9&&Z<13){var s;0==(s=Math.floor(8*Math.random()))&&p(0,1),1==s&&p(0,-1,Math.floor(Math.random()*U.width),U.height),2==s&&p(1,0,0,Math.floor(Math.random()*U.height)),3==s&&p(-1,0,U.width,Math.floor(Math.random()*U.height)),4==s&&p(1,1,Math.floor(Math.random()*U.width),0),5==s&&p(-1,1,Math.floor(Math.random()*U.width),0),6==s&&p(1,-1,Math.floor(Math.random()*U.width),U.height),7==s&&p(-1,-1,Math.floor(Math.random()*U.width),U.height)}mt=0}i.update(),i.x>U.width&&(i.x=U.width),i.x<0&&(i.x=0),i.y<0&&(i.y=0),i.y>U.height&&(i.y=U.height),pt||(yt.map((t=>{t.update()})),yt=yt.filter((t=>t.isAlive())),st<1&&F()),vt.map((t=>{t.update()})),vt=vt.filter((t=>t.isAlive())),bt=bt.filter((t=>t.isAlive()))}Tt.map((t=>{t.update()}))}else rt&&!i.isAlive()&&(k("start")||k("south")||N(["r","enter","space"]))&&(wt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],_t=[11,22,33,44,55,66,77,88,99],pt?(i.x=U.width/2,i.y=U.height/2+U.height/4,i.ttl=1/0,i.win=!1,ot=!1,at=!1,dt=!1,nt=!0):(ct=!1,pt=!1,Z=1,_.content="Level: "+Z,et=0,M.content="Score: "+et,it=0,S.content="Total: "+it,st=15,ht=0,R.content="Time Left: "+st,L(),Tt.push(_),Tt.push(M),Tt.push(R),vt=vt.filter((t=>!t.isAlive())),bt=bt.filter((t=>{t.isAlive()})),i.x=U.width/2+U.height/4,i.y=U.height/2+U.height/4,i.ttl=1/0,i.win=!1,ot=!1,at=!1,dt=!1,nt=!0,d(V.game1)),console.log("restart")),at||dt||rt||!(k("start")||k("south")||N(["r","enter","space"]))||(pt=!1,ct=!1,wt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],_t=[11,22,33,44,55,66,77,88,99],Z=1,tt=100,_.content="Level: "+Z,et=0,M.content="Score: "+et,it=0,S.content="Total: "+it,st=$,ht=0,R.content="Time Left: "+st,L(),Tt.push(_),Tt.push(M),Tt.push(R),vt=vt.filter((t=>!t.isAlive())),bt=bt.filter((t=>{t.isAlive()})),i.x=U.width/2,i.y=U.height/2+U.height/4,i.ttl=1/0,i.win=!1,ot=!1,rt=!0,at=!1,dt=!1,nt=!1,console.log("newgame")),at||dt||nt||!(k("start")||k("south")||N(["r","enter","space"]))||(console.log("level started"),Z<=3?(W.playbackRate=1,d(V.game1)):Z>=4&&Z<=6?(W.playbackRate=1,d(V.game3)):Z>=7&&Z<=12?(W.playbackRate=1,d(V.game2)):(W.playbackRate+=.1,W.currentTime=0,W.play()),7==Z&&g(),13==Z&&X(),nt=!0);(k("select")||N(["m"]))&&(W.muted=!W.muted),(k("north")||N(["l"]))&&function(t=!1){if(Z+=1,W.pause(),t){et+=100;for(var e=0;e<5;e++)Rt(ft[Math.floor(Math.random()*(ft.length-1))].effect)}Z>=14?(I(),D()):(draw(z,"Next Level!",9,"#FFFFFF",125,200),Y.stop(),K.src=V.lu1,K.play(),gt+=.25);_.content="Level: "+Z}(!0),(k("east")||N(["e"]))&&i.currentBombTime<=0&&function(t,e,s){let h=y({type:"p_bomb",active:!0,content:"X",x:t,y:e,anchor:{x:.5,y:.5},color:"#CCCCCC",width:35,height:35,dmg:s,bombTimer:10,update(){this.bombTimer-=1/60,this.bombTimer<0&&(o(H,V.b1),this.ttl=0)},render(){draw(z,this.content,4,this.color)}});i.currentBombTime=i.bombTime,bt.push(h)}(i.x,i.y,i.bombDmg),N(["n"])&&!ct&&(ct=!0,g()),N(["b"])&&!pt&&X()},render:function(){rt&&nt?(i.render(),yt.map((t=>{t.render()})),Tt.map((t=>{t.render()})),vt.map((t=>{t.render()})),bt.map((t=>{t.render()})),i.isAlive()||(i.win?D():draw(z,"GAME OVER",12,"red",420,300))):!rt||nt||at||dt||(draw(z,"LEVEL COMPLETE",12,"green",320,300),draw(z,"PRESS START OR SOUTH BUTTON FOR NEXT LEVEL",4,"white",335,380)),(ot||at||dt)&&(C.update(),C.render())}});function X(){pt=!0,_.color="red",R.ttl=0,vt=vt.filter((t=>{t.isAlive()})),bt=bt.filter((t=>{t.isAlive()})),yt=yt.filter((t=>!t.isAlive())),Tt=Tt.filter((t=>{t.isAlive()})),W.pause(),W.currentTime=0,W.playbackRate=1,W.src=V.boss,W.loop=!0,W.play(),f()}function B(t,e,i=!1){var s=new CPlayer,h=!1;s.init(t),setInterval((function(){if(!h&&(h=s.generate()>=1)){var t=s.createWave();Object.defineProperty(V,e,{value:URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}),"menu"==e&&d(V.menu),i&&J.push(V.src)}}))}function F(){i.ttl=0,i.win=!1,i.playAnimation("die"),yt.filter((t=>{t.ttl=0})),W.pause(),W.currentTime=0,W.playbackRate=1,W.src=V.dr2,W.loop=!1,W.play()}function I(){i.ttl=0,i.win=!0,i.playAnimation("idle"),yt.filter((t=>{t.ttl=0})),W.pause(),W.currentTime=0}function D(){draw(z,"YOU WIN!",12,"red",460,300)}function Rt(t){"magnet_range"==t&&(i.magnetRange+=4),"magnet_speed_mult"==t&&(i.magnetSpeedMult+=.1),"thrust_time"==t&&(i.thrustTime+=.1),"thrust_refresh_time"==t&&(i.thrustRefreshTime-=.05),"thrust_mult"==t&&(i.thrustMult+=.1),"player_speed"==t&&(ut+=.1,i.speed=ut),"bomb_dmg"==t&&(i.bombDmg+=1),"bomb_time"==t&&(i.bomb_time-=.2)}O(["p"],(function(t){Y.isStopped?(Y.start(),W.play()):(Y.stop(),W.pause())})),P.BracketLeft="leftbracket",P.BracketRight="rightbracket",P.ShiftLeft="leftshift",O("leftbracket",(function(t){(Q-=1)<0&&(Q=0),W.pause(),W.currentTime=0,W.src=J[Q],W.play()})),O("rightbracket",(function(t){(Q+=1)>J.length-1&&(Q=0),W.pause(),W.currentTime=0,W.src=J[Q],W.play()})),O("leftshift",(function(t){i.isThrusting||i.isThrustRefreshing||i.isPrimed||(i.isThrusting=!0,i.speed=ut*i.thrustMult)})),O("leftshift",(function(t){i.isThrusting&&(i.isThrusting=!1,i.isThrustRefreshing=!0,i.speed=ut)}),{handler:"keyup"}),A("west",(function(t){i.isThrusting||i.isThrustRefreshing||i.isPrimed||(i.isThrusting=!0,i.speed=ut*i.thrustMult)})),A("west",(function(t){i.isThrusting&&(i.isThrusting=!1,i.isThrustRefreshing=!0,i.speed=ut)}),{handler:"gamepadup"}),B(m_game1_d,"game1",!0),B(m_game2_d,"game2",!0),B(m_game3_d,"game3",!0),B(song4,"game4",!0),B(m_death_d,"death"),B(tally,"tally"),B(m_menu_d,"menu",!0),B(m_boss_d,"boss",!0),B(pu1,"pu1"),B(pu2,"pu2"),B(pu3,"pu3"),B(lp1,"lp1"),B(lp2,"lp2"),B(lp3,"lp3"),B(lz1,"lz1"),B(dr1,"dr1"),B(dr2,"dr2"),B(dr3,"dr3"),B(b1,"b1"),B(lu1,"lu1"),W.onended=function(){W.src==V.dr2&&(W.src=V.death,W.loop=!1,W.currentTime=0,W.playbackRate=1,W.play())},K.onended=function(){lt=!0,Y.start()},Y.start()}}();
