!function(){"use strict";
/**
   * @preserve
   * Kontra.js v9.0.0
   */let t=()=>{};let e,i,s={};function h(t,e){s[t]=s[t]||[],s[t].push(e)}function n(t,...e){(s[t]||[]).map((t=>t(...e)))}let a={get:(e,i)=>"_proxy"==i||t};function r(){return i}class o{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0,name:h}){let{width:n,height:a,margin:r=0}=t.frame;Object.assign(this,{spriteSheet:t,frames:e,frameRate:i,loop:s,name:h,width:n,height:a,margin:r,isStopped:!1,_f:0,_a:0})}clone(){return new o(this)}start(){this.isStopped=!1,this.loop||this.reset()}stop(){this.isStopped=!0}reset(){this._f=0,this._a=0}update(t=1/60){if(!this.isStopped)if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate;else this.stop()}render({x:t,y:e,width:i=this.width,height:s=this.height,context:h=r()}){let n=this.frames[this._f]/this.spriteSheet._f|0,a=this.frames[this._f]%this.spriteSheet._f|0;h.drawImage(this.spriteSheet.image,a*this.width+(2*a+1)*this.margin,n*this.height+(2*n+1)*this.margin,this.width,this.height,t,e,i,s)}}function c(){return new o(...arguments)}function l(t,e,i){return Math.min(Math.max(t,i),e)}class d{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new d(this.x+t.x,this.y+t.y,this)}subtract(t){return new d(this.x-t.x,this.y-t.y,this)}scale(t){return new d(this.x*t,this.y*t)}normalize(t=this.length()||1){return new d(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?l(this._a,this._d,t):t}set y(t){this._y=this._c?l(this._b,this._e,t):t}}function p(){return new d(...arguments)}class u{constructor(t){return this.init(t)}init(t={}){this.position=p(),this.velocity=p(),this.acceleration=p(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class f extends u{init({width:t=0,height:e=0,context:i=r(),render:s=this.draw,update:n=this.advance,children:a=[],anchor:o={x:0,y:0},opacity:c=1,rotation:l=0,scaleX:d=1,scaleY:p=1,...u}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:o,opacity:c,rotation:l,scaleX:d,scaleY:p,...u}),this._di=!0,this._uw(),this.addChild(a),this._rf=s,this._uf=n,h("init",(()=>{this.context??=r()}))}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(e||i)&&t.translate(e,i),this.context.globalAlpha=this.opacity,this._rf(),(e||i)&&t.translate(-e,-i),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:s=0,_wsx:h=1,_wsy:n=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wsx=h*this.scaleX,this._wsy=n*this.scaleY,this._wx=this._wx*h,this._wy=this._wy*n,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=s+this.rotation;let{x:a,y:r}=function(t,e){let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}({x:this._wx,y:this._wy},s);this._wx=a,this._wy=r,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...e){e.flat().map((e=>{this.children.push(e),e.parent=this,e._pc=e._pc||t,e._pc()}))}removeChild(...t){t.flat().map((t=>{(function(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0})(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=l(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class y extends f{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function m(){return new y(...arguments)}function w(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}let g=[],v={},x={},_={0:"south",1:"east",2:"west",3:"north",4:"leftshoulder",5:"rightshoulder",6:"lefttrigger",7:"righttrigger",8:"select",9:"start",10:"leftstick",11:"rightstick",12:"dpadup",13:"dpaddown",14:"dpadleft",15:"dpadright"};function M(t){g[t.gamepad.index]={pressedButtons:{},axes:{}}}function b(t){delete g[t.gamepad.index]}function R(){g.map((t=>{t.pressedButtons={},t.axes={}}))}function S(){let t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;i.buttons.map(((t,e)=>{let s=_[e],{pressed:h}=t,{pressedButtons:n}=g[i.index],a=n[s];!a&&h?[v[i.index],v].map((e=>{e?.[s]?.(i,t,s)})):a&&!h&&[x[i.index],x].map((e=>{e?.[s]?.(i,t,s)})),n[s]=h}));let{axes:s}=g[i.index];s.leftstickx=i.axes[0],s.leftsticky=i.axes[1],s.rightstickx=i.axes[2],s.rightsticky=i.axes[3]}}function L(t,e,{gamepad:i,handler:s="gamepaddown"}={}){let h="gamepaddown"==s?v:x;[].concat(t).map((t=>{isNaN(i)?h[t]=e:(h[i]=h[i]||{},h[i][t]=e)}))}function T(t,{gamepad:e}={}){return isNaN(e)?g.some((e=>e.pressedButtons[t])):!!g[e]&&!!g[e].pressedButtons[t]}function k(t,e){return g[e]?.axes[t]||0}let U={},A={},P={},C={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function I(e=t,i){e._pd&&i.preventDefault(),e(i)}function B(t){let e=C[t.code],i=U[e];P[e]=!0,I(i,t)}function O(t){let e=C[t.code],i=A[e];P[e]=!1,I(i,t)}function E(){P={}}function W(t,e,{handler:i="keydown",preventDefault:s=!0}={}){let h="keydown"==i?U:A;e._pd=s,[].concat(t).map((t=>h[t]=e))}function Y(t){return!![].concat(t).some((t=>P[t]))}function j(t){if(+t==t)return t;let e=[],i=t.split(".."),s=+i[0],h=+i[1],n=s;if(s<h)for(;n<=h;n++)e.push(n);else for(;n>=h;n--)e.push(n);return e}class X{constructor({image:t,frameWidth:e,frameHeight:i,frameMargin:s,animations:h}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,margin:s},this._f=t.width/e|0,this.createAnimations(h)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:h,loop:n}=t[i];if(e=[],null==s)throw Error("Animation "+i+" must provide a frames property");[].concat(s).map((t=>{e=e.concat(j(t))})),this.animations[i]=c({spriteSheet:this,frames:e,frameRate:h,loop:n,name:i})}}}let{canvas:F,context:N}=function(t,{contextless:s=!1}={}){if(e=document.getElementById(t)||t||document.querySelector("canvas"),s&&(e=e||new Proxy({},a)),!e)throw Error("You must provide a canvas element for the game");return i=e.getContext("2d")||new Proxy({},a),i.imageSmoothingEnabled=!1,n("init"),{canvas:e,context:i}}();var D,G,q,H,z,K,V,J,Q,Z,$,tt,et,it,st,ht,nt,at,rt,ot,ct,lt,dt=new CPlayer,pt=new CPlayer,ut=new CPlayer,ft=new CPlayer,yt=new CPlayer,mt=new CPlayer,wt=new CPlayer,gt=new CPlayer,vt=new CPlayer,xt=new CPlayer,_t=new CPlayer,Mt=new CPlayer,bt=new CPlayer,Rt=new CPlayer,St=new CPlayer,Lt=new CPlayer,Tt=new CPlayer,kt=new CPlayer;let Ut=[];var At=0,Pt=!1;dt.init(m_game1_d),setInterval((function(){if(!Pt&&(Pt=dt.generate()>=1)){var t=dt.createWave();G=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),Ut.push(G)}}));var Ct=!1;pt.init(m_game2_d),setInterval((function(){if(!Ct&&(Ct=pt.generate()>=1)){var t=pt.createWave();q=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),Ut.push(q)}}));var It=!1;ut.init(m_game3_d),setInterval((function(){if(!It&&(It=ut.generate()>=1)){var t=ut.createWave();H=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),Ut.push(H)}}));var Bt=!1;mt.init(m_death_d),setInterval((function(){if(!Bt&&(Bt=mt.generate()>=1)){var t=mt.createWave();K=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var Ot=!1;ft.init(m_menu_d),setInterval((function(){if(!Ot&&(Ot=ft.generate()>=1)){var t=ft.createWave();D=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),Ut.push(D),at.src=D,at.loop=!0,at.play()}}));var Et=!1;yt.init(m_boss_d),setInterval((function(){if(!Et&&(Et=yt.generate()>=1)){var t=yt.createWave();z=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),Ut.push(z)}}));var Wt=!1;wt.init(pu1),setInterval((function(){if(!Wt&&(Wt=wt.generate()>=1)){var t=wt.createWave();V=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),ot=document.createElement("audio")}}));var Yt=!1;gt.init(pu2),setInterval((function(){if(!Yt&&(Yt=gt.generate()>=1)){var t=gt.createWave();J=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var jt=!1;vt.init(pu3),setInterval((function(){if(!jt&&(jt=vt.generate()>=1)){var t=vt.createWave();Q=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var Xt=!1;xt.init(lp1),setInterval((function(){if(!Xt&&(Xt=xt.generate()>=1)){var t=xt.createWave();Z=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),rt=document.createElement("audio")}}));var Ft=!1;_t.init(lp2),setInterval((function(){if(!Ft&&(Ft=_t.generate()>=1)){var t=_t.createWave();$=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var Nt=!1;Mt.init(lp3),setInterval((function(){if(!Nt&&(Nt=Mt.generate()>=1)){var t=Mt.createWave();tt=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var Dt=!1;bt.init(lz1),setInterval((function(){if(!Dt){if(Dt=bt.generate()>=1){var t=bt.createWave();et=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}ct=document.createElement("audio")}}));var Gt=!1;Rt.init(dr1),setInterval((function(){if(!Gt&&(Gt=Rt.generate()>=1)){var t=Rt.createWave();it=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var qt=!1;St.init(dr2),setInterval((function(){if(!qt&&(qt=St.generate()>=1)){var t=St.createWave();st=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),(at=document.createElement("audio")).onended=function(){at.src==st&&(at.src=K,at.loop=!1,at.currentTime=0,at.playbackRate=1,at.play())}}}));var Ht=!1;Lt.init(dr3),setInterval((function(){if(!Ht&&(Ht=Lt.generate()>=1)){var t=Lt.createWave();ht=URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var zt=!1;Tt.init(b1),setInterval((function(){if(!zt&&(zt=Tt.generate()>=1)){var t=Tt.createWave();URL.createObjectURL(new Blob([t],{type:"audio/wav"}))}}));var Kt=1,Vt=15,Jt=100,Qt=0,Zt=0,$t=15,te=0,ee=!1,ie=!1,se=!1,he=!1,ne=0,ae=1;let re=[];re.push({effect:"magnet",color:"green"}),re.push({effect:"thrust",color:"orange"});let oe=[],ce=[],le=[],de=[],pe=[];!function(){let t;for(t=0;t<26;t++)C["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)C["Digit"+t]=C["Numpad"+t]=""+t;window.addEventListener("keydown",B),window.addEventListener("keyup",O),window.addEventListener("blur",E)}(),window.addEventListener("gamepadconnected",M),window.addEventListener("gamepaddisconnected",b),window.addEventListener("blur",R),h("tick",S);let ue=new Image;ue.src="player_sheet.png",ue.onload=function(){let e=function(){return new X(...arguments)}({image:ue,frameWidth:32,frameHeight:32,animations:{idle:{frames:[0,1,2,3],frameRate:5,loop:!0},walk:{frames:[4,5,6,7],frameRate:5,loop:!0},die:{frames:10,frameRate:5,loop:!1}}}),i=m({speed:3,isMoving:!1,isPrimed:!1,scaleX:1,scaleY:1,badShit:0,win:!1,magnetRange:32,thrustingMult:1,isThrusting:!1,x:360,y:240,anchor:{x:.5,y:.5},animations:e.animations,ttl:0,update(){let t=k("leftstickx",0),e=k("leftsticky",0);this.isMoving=!1,t<-.4||Y(["arrowleft","a"])?(this.x-=1*this.speed,this.isMoving=!0):(t>.4||Y(["arrowright","d"]))&&(this.x+=1*this.speed,this.isMoving=!0),e<-.4||Y(["arrowup","w"])?(this.y-=1*this.speed,this.isMoving=!0):(e>.4||Y(["arrowdown","s"]))&&(this.y+=1*this.speed,this.isMoving=!0);for(var i=0;i<oe.length;i++){let t=oe[i];if(s(this,t)){if("letter"==t.type){if(Qt+=parseInt(t.content),$t+=parseInt(t.content),Qt>=Jt)Kt+=1,at.pause(),Kt>=14?(B(),O()):(draw(N,"Next Level!",9,"#FFFFFF",125,200),U.stop(),lt.play(),ae+=.5);else 0==(h=Math.floor(3*Math.random()))&&a(rt,Z),1==h&&a(rt,$),2==h&&a(rt,tt);M.content="Score: "+Qt,ce.includes(Qt)?(l(),this.isPrimed=!0,this.isThrusting=!1,c()):(l(),this.isPrimed=!1),le.includes(Qt)&&(d(re[Math.floor(Math.random()*re.length)]),le=le.filter((t=>t!=Qt)),console.log(le))}if("powerup"==t.type)0==(h=Math.floor(3*Math.random()))&&a(rt,Z),1==h&&a(rt,$),2==h&&a(rt,tt),0==h&&a(ot,V),1==h&&a(ot,J),2==h&&a(ot,Q),u(t.effect);t.ttl=0}t.x>=this.x-this.magnetRange&&t.x<=this.x+this.magnetRange&&t.y>=this.y-this.magnetRange&&t.y<=this.y+this.magnetRange&&(t.x>this.x&&(t.x-=1),t.x<this.x&&(t.x+=1),t.y>this.y&&(t.y-=1),t.y<this.y&&(t.y+=1))}for(i=0;i<de.length;i++){let t=de[i];var h;if(("1"==t.type||"2"==t.type||"3"==t.type||"4"==t.type||"enemy_shot"==t.type)&&s(this,t))(Qt-=t.scoreDamage)<0&&(Qt=0),M.content="Score: "+Qt,t.ttl=0,0==(h=Math.floor(3*Math.random()))&&a(rt,Z),1==h&&a(rt,$),2==h&&a(rt,tt),ce.includes(Qt)?(l(),this.isPrimed=!0,this.isThrusting=!1,c()):(l(),this.isPrimed=!1),le.includes(Qt)&&(d(re[Math.floor(Math.random()*re.length)]),le=le.filter((t=>t!=Qt)),console.log(le));"mid_boss_shot"==t.type&&s(this,t)&&I(),"final_boss_shot"==t.type&&s(this,t)&&I()}this.isMoving?"walk"!=this.currentAnimation.name&&this.playAnimation("walk"):"idle"!=this.currentAnimation.name&&this.playAnimation("idle"),this.advance()}});function s(t,e){return t.x>=e.x-e.width/2&&t.x<=e.x+e.width/2&&t.y>=e.y-e.height/2&&t.y<=e.y+e.height/2}function a(t,e){t.src=e,t.play()}function o(t){at.pause(),at.currentTime=0,at.src=t,at.play()}function c(){a(ot,it),i.badShit=Math.floor(3*Math.random()+1),1==i.badShit&&(i.speed=-i.speed),2==i.badShit&&(i.speed=.5),3==i.badShit&&(i.speed=10)}function l(){i.isPrimed&&a(ot,ht),1==i.badShit&&(i.speed=-i.speed),2==i.badShit&&(i.speed=3),3==i.badShit&&(i.speed=3),i.badShit=0}function d(t){let e=m({type:"powerup",effect:t.effect,content:p(t.effect),speed:1,x:Math.floor(Math.random()*F.width),y:0,anchor:{x:.5,y:.5},color:t.color,color1:t.color,color2:"white",blinkTimer:0,blinkSpeed:30,width:20,height:20,update(){this.y+=1*this.speed,this.blinkTimer+=1,this.blinkTimer>this.blinkSpeed&&(this.color==this.color1?this.color=this.color2:this.color=this.color1,this.blinkTimer=0)},render(){draw(N,this.content,4,this.color)}});oe.push(e)}function p(t){return"magnet"==t?"U":"thrust"==t?"I":void 0}function u(t){"magnet"==t&&(i.magnetRange+=8),"thrust"==t&&(i.thrustingMult+=.2)}function f(t,e,s){let h=m({type:t,content:y(t),speed:e,scoreDamage:s,shotTimer:60,currentShotTime:0,isMoving:!1,x:Math.floor(Math.random()*F.width),y:Math.floor(Math.random()*F.height),anchor:{x:.5,y:.5},color:"yellow",width:20,height:20,update(){var e=Math.floor(2*Math.random()),s=Math.floor(2*Math.random());"2"!=t&&"4"!=t||(this.currentShotTime+=1,this.currentShotTime>this.shotTimer&&(!function(t,e){a(ct,et);let i=m({type:"enemy_shot",moveX:Math.floor(2*Math.random()),moveY:Math.floor(2*Math.random()),ttl:180,content:"O",speed:3,scoreDamage:1,isMoving:!1,x:t,y:e,anchor:{x:.5,y:.5},color:"pink",width:10,height:10,update(t){0==this.moveX?(this.x-=1*this.speed,this.isMoving=!0):1==this.moveX&&(this.x+=1*this.speed,this.isMoving=!0),0==this.moveY?(this.y-=1*this.speed,this.isMoving=!0):1==this.moveY&&(this.y+=1*this.speed,this.isMoving=!0)},render(){draw(N,this.content,2,this.color)}});de.push(i)}(this.x,this.y),this.currentShotTime=0)),0==e?(this.x-=1*this.speed,this.isMoving=!0):1==e&&(this.x+=1*this.speed,this.isMoving=!0),0==s?(this.y-=1*this.speed,this.isMoving=!0):1==s&&(this.y+=1*this.speed,this.isMoving=!0),this.x<i.x&&(this.x+=1*this.speed),this.x>i.x&&(this.x-=1*this.speed),this.y<i.y&&(this.y+=1*this.speed),this.y>i.y&&(this.y-=1*this.speed),this.x<0&&(this.x=0),this.x>F.width&&(this.x=F.width),this.y<0&&(this.y=0),this.y>F.height&&(this.y=F.height)},render(){draw(N,this.content,4,this.color)}});de.push(h)}function y(t){return"1"==t?"2":"2"==t?"3":"3"==t?"5":"4"==t?"7":void 0}function g(){let t=m({type:"mid_boss",shotTimer:120,currentShotTime:0,content:"PR1M3",speed:1,isMoving:!1,x:Math.floor(Math.random()*F.width),y:Math.floor(Math.random()*F.height),anchor:{x:.5,y:.5},color:"yellow",width:100,height:20,update(){this.currentShotTime+=1,this.currentShotTime>this.shotTimer&&(a(ct,et),x(this.x,this.y,-1,-1),x(this.x,this.y,-1,1),x(this.x,this.y,1,-1),x(this.x,this.y,1,1),this.currentShotTime=0);var t=Math.floor(2*Math.random()),e=Math.floor(2*Math.random());0==t?(this.x-=3*this.speed,this.isMoving=!0):1==t&&(this.x+=3*this.speed,this.isMoving=!0),0==e?(this.y-=3*this.speed,this.isMoving=!0):1==e&&(this.y+=3*this.speed,this.isMoving=!0),this.x<0&&(this.x=0),this.x>F.width&&(this.x=F.width),this.y<0&&(this.y=0),this.y>F.height&&(this.y=F.height)},render(){draw(N,this.content,6,this.color)}});de.push(t)}function v(){let t=m({type:"final_boss",shotTimer:60,currentShotTime:0,content:"8055",speed:1.5,isMoving:!1,x:Math.floor(Math.random()*F.width),y:Math.floor(Math.random()*F.height),anchor:{x:.5,y:.5},color:"red",width:80,height:20,update(){this.currentShotTime+=1,this.currentShotTime>this.shotTimer&&(a(ct,et),function(t,e){let i=m({type:"final_boss_shot",moveX:Math.floor(2*Math.random()),moveY:Math.floor(2*Math.random()),ttl:180,content:"13",speed:3,isMoving:!1,x:t,y:e,anchor:{x:.5,y:.5},color:"pink",width:40,height:20,update(t){this.rotation+=.2,0==this.moveX?(this.x-=1*this.speed,this.isMoving=!0):1==this.moveX&&(this.x+=1*this.speed,this.isMoving=!0),0==this.moveY?(this.y-=1*this.speed,this.isMoving=!0):1==this.moveY&&(this.y+=1*this.speed,this.isMoving=!0)},render(){draw(N,this.content,4,this.color)}});de.push(i)}(this.x,this.y),this.currentShotTime=0);var t=Math.floor(2*Math.random()),e=Math.floor(2*Math.random());0==t?(this.x-=3*this.speed,this.isMoving=!0):1==t&&(this.x+=3*this.speed,this.isMoving=!0),0==e?(this.y-=3*this.speed,this.isMoving=!0):1==e&&(this.y+=3*this.speed,this.isMoving=!0),this.x<i.x&&(this.x+=1*this.speed),this.x>i.x&&(this.x-=1*this.speed),this.y<i.y&&(this.y+=1*this.speed),this.y>i.y&&(this.y-=1*this.speed),this.x<0&&(this.x=0),this.x>F.width&&(this.x=F.width),this.y<0&&(this.y=0),this.y>F.height&&(this.y=F.height)},render(){draw(N,this.content,8,this.color)}});de.push(t)}function x(t,e,i,s){let h=m({type:"mid_boss_shot",moveX:i,moveY:s,ttl:180,content:"7",speed:3,isMoving:!1,x:t,y:e,anchor:{x:.5,y:.5},color:"orange",width:10,height:10,update(t){this.rotation+=.1,this.x+=i,this.y+=s},render(){draw(N,this.content,4,this.color)}});de.push(h)}let _=m({content:"Level: "+Kt,x:5,y:5,color:"#eeeeee",width:20,height:20,update(){},render(){draw(N,this.content,4,this.color)}});pe.push(_);let M=m({content:"Score: "+Qt,x:5,y:30,color:"#eeeeee",width:20,height:20,update(){i.isPrimed?this.color="#ff0000":this.color="#eeeeee"},render(){draw(N,this.content,4,this.color)}});pe.push(M);let b=m({content:Qt.toString(),x:-3,y:-35,color:"#eeeeee",width:15,height:15,update(){this.content=Qt.toString(),this.x=Qt>9?-10:-3,i.isPrimed?this.color="#ff0000":this.color="#eeeeee"},render(){draw(N,this.content,3,this.color)}});i.addChild(b);let R=m({content:"Time Left: "+$t,x:5,y:55,color:"#eeeeee",width:20,height:20,update(){this.content="Time Left: "+$t,$t<=10?(this.color="#ff0000",at.playbackRate=$t<=5?1.22:1.11):(this.color="#eeeeee",at.playbackRate=1)},render(){draw(N,this.content,4,this.color)}});pe.push(R);let S=m({content:"Total: "+Zt,x:5,y:80,color:"#eeeeee",width:20,height:20,update(){},render(){draw(N,this.content,4,this.color)}});pe.push(S);let U=function({fps:e=60,clearCanvas:i=!0,update:s=t,render:a,context:o=r(),blur:c=!1}={}){if(!a)throw Error("You must provide a render() function");let l,d,p,u,f,y=0,m=1e3/e,g=1/e,v=i?w:t,x=!0;function _(){if(d=requestAnimationFrame(_),x&&(p=performance.now(),u=p-l,l=p,!(u>1e3))){for(n("tick"),y+=u;y>=m;)f.update(g),y-=m;v(f.context),f.render()}}return c||(window.addEventListener("focus",(()=>{x=!0})),window.addEventListener("blur",(()=>{x=!1}))),h("init",(()=>{f.context??=r()})),f={update:s,render:a,isStopped:!0,context:o,start(){l=performance.now(),this.isStopped=!1,requestAnimationFrame(_)},stop(){this.isStopped=!0,cancelAnimationFrame(d)},_frame:_,set _last(t){l=t}},f}({update:function(){if(i.isAlive()){if(ie)Qt>0&&(Qt-=1,M.content="Score: "+Qt,Zt+=1,S.content="Total: "+Zt),Qt<1&&$t>0&&($t-=1,R.content="Time: "+$t,Zt+=1,S.content="Total: "+Zt),Qt<1&&$t<1&&(de=de.filter((t=>{t.isAlive()})),oe=oe.filter((t=>{t.isAlive()})),ce=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],le=[11,22,33,44,55,66,77,88,99],ie=!1,Qt=0,$t=15,4==Kt?(at.playbackRate=1,o(H)):7==Kt?(at.playbackRate=1,o(q),g()):(at.playbackRate+=.1,at.currentTime=0,at.play()),13==Kt&&A(),_.content="Level: "+Kt);else{if(ne+=1/60,(te+=1/60)>1){if($t-=1,Kt>1&&ce.includes($t))for(f((Math.floor(3*Math.random())+1).toString(),Math.floor(1*Math.random())+1,Math.floor(1*Math.random())+1);de.length>10;)de.splice(1,1);te=0}ne>1&&(!function(){let t=m({type:"letter",content:Math.floor(8*Math.random()+1).toString(),speed:ae,x:Math.floor(Math.random()*F.width),y:0,anchor:{x:.5,y:.5},color:"#eeeeee",width:20,height:20,update(){this.y+=1*this.speed,this.y>F.height&&(this.ttl=0)},render(){draw(N,this.content,4,this.color)}});oe.push(t)}(),ne=0),i.update(),i.x>F.width&&(i.x=F.width),i.x<0&&(i.x=0),i.y<0&&(i.y=0),i.y>F.height&&(i.y=F.height),he||(oe.map((t=>{t.update()})),oe=oe.filter((t=>t.isAlive())),$t<1&&I()),de.map((t=>{t.update()})),de=de.filter((t=>t.isAlive()))}pe.map((t=>{t.update()}))}else ee&&(T("south")||Y(["r","enter","space"]))&&(ce=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],le=[11,22,33,44,55,66,77,88,99],he?(i.x=F.width/2,i.y=F.height/2,i.ttl=1/0,i.win=!1,at.position=0,at.playbackRate=1,at.src=z,at.loop=!0,at.play()):(se=!1,he=!1,Kt=1,_.content="Level: "+Kt,Qt=0,M.content="Score: "+Qt,Zt=0,S.content="Total: "+Zt,$t=15,te=0,R.content="Time Left: "+$t,pe.push(_),pe.push(M),pe.push(R),de=de.filter((t=>!t.isAlive())),i.x=F.width/2,i.y=F.height/2,i.ttl=1/0,i.win=!1,at.playbackRate=1,at.src=G,at.loop=U,at.play())),ee||!T("south")&&!Y(["r","enter","space"])||(he=!1,se=!1,ce=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],le=[11,22,33,44,55,66,77,88,99],Kt=1,Jt=100,_.content="Level: "+Kt,Qt=0,M.content="Score: "+Qt,Zt=0,S.content="Total: "+Zt,$t=Vt,te=0,R.content="Time Left: "+$t,pe.push(_),pe.push(M),pe.push(R),de=de.filter((t=>!t.isAlive())),i.x=F.width/2,i.y=F.height/2,i.ttl=1/0,i.win=!1,ee=!0,at.position=0,at.playbackRate=1,at.src=G,at.loop=!0,at.play());(T("select")||Y(["m"]))&&(at.muted=!at.muted),Y(["n"])&&!se&&(se=!0,g()),Y(["b"])&&!he&&A()},render:function(){ee?(i.render(),oe.map((t=>{t.render()})),pe.map((t=>{t.render()})),de.map((t=>{t.render()})),i.isAlive()||(i.win?O():draw(N,"GAME OVER",12,"red",125,200))):E()}});function A(){he=!0,_.ttl=0,M.ttl=0,R.ttl=0,S.ttl=0,de=de.filter((t=>{t.isAlive()})),oe=oe.filter((t=>!t.isAlive())),pe=pe.filter((t=>{t.isAlive()})),at.pause(),at.currentTime=0,at.playbackRate=1,at.src=z,at.loop=!0,at.play(),v()}W(["p"],(function(t){U.isStopped?U.start():U.stop()})),C.BracketLeft="leftbracket",C.BracketRight="rightbracket",C.ShiftLeft="leftshift",W("leftbracket",(function(t){(At-=1)<0&&(At=0),at.pause(),at.currentTime=0,at.src=Ut[At],at.play()})),W("rightbracket",(function(t){(At+=1)>Ut.length-1&&(At=0),at.pause(),at.currentTime=0,at.src=Ut[At],at.play()})),W("leftshift",(function(t){i.isThrusting||i.isPrimed||(i.isThrusting=!0,i.speed=3*i.thrustingMult)})),W("leftshift",(function(t){i.isThrusting&&(i.isThrusting=!1,i.speed=3)}),{handler:"keyup"}),L("west",(function(t){i.isThrusting||i.isPrimed||(i.isThrusting=!0,i.speed=3*i.thrustingMult)})),L("west",(function(t){i.isThrusting&&(i.isThrusting=!1,i.speed=3)}),{handler:"gamepadup"});var P=!1;function I(){i.ttl=0,i.win=!1,i.playAnimation("die"),oe.filter((t=>{t.ttl=0})),at.pause(),at.currentTime=0,at.playbackRate=1,at.src=st,at.loop=!1,at.play()}function B(){i.ttl=0,i.win=!0,i.playAnimation("idle"),oe.filter((t=>{t.ttl=0})),at.pause(),at.currentTime=0}function O(){draw(N,"YOU WIN!",12,"red",150,200)}function E(){draw(N,"PRIMONUMEROPHOBIA",9,"red",340,300)}kt.init(lu1),setInterval((function(){if(!P&&(P=kt.generate()>=1)){var t=kt.createWave();nt=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),(lt=document.createElement("audio")).src=nt,lt.loop=!1,lt.onended=function(){ie=!0,U.start()}}})),E(),U.start()}}();
